#!/bin/bash

##############################################################################
# Path

prepath=(
  $HOME/clone/eclipse-4.3
  $HOME/clone/scala-2.11.2/bin
  $HOME/bin
  )

postpath=(
  $HOME/clone/android-sdk-linux/platform-tools
  $HOME/clone/android-sdk-linux/tools
  $HOME/clone/ducttape-0.3-pre2
  )

for dir in "${prepath[@]}"
do
  if [[ -d $dir ]]
  then
    export PATH="$dir:$PATH"
  fi
done

for dir in "${postpath[@]}"
do
  if [[ -d $dir ]]
  then
    export PATH="$PATH:$dir"
  fi
done

##############################################################################
# Python Path

pythondirs=(
    /usr0/local/lib/python2.7/dist-packages
    /usr/lib/python2.7/dist-packages
    /usr/lib/python2.7/site-packages
    /usr/lib64/python2.7/site-packages
    $HOME/pythonutil
    $HOME/clone
    $HOME/clone/django
    $HOME/clone/mrs-mapreduce
    $HOME/clone/amlpso
    $HOME/clone/django
    $HOME/clone/south
    $HOME/clone/smug
    $HOME/clone/evilplot
    $HOME/games
    )

export PYTHONPATH=""

for dir in ${pythondirs[@]}
do
  if [[ -d $dir ]]
  then
    if [[ $PYTHONPATH == "" ]]
    then
      export PYTHONPATH="$dir"
    else
      export PYTHONPATH="$PYTHONPATH:$dir"
    fi
  fi
done

set -o vi


# Aliases that are machine specific
if [[ -e $HOME/.aliases ]]
then
  . $HOME/.aliases
fi

# Default editor should be vim
export EDITOR=vim
export VISUAL=vim

# Aliases that I want on all of my machines
alias convertalltoeps='for file in `ls *.pgm`; do convert $file `basename $file .pgm`.eps; done; for file in `ls *.ppm`; do convert $file `basename $file .ppm`.eps; done'
alias rm='rm -i'
alias pushall="git commit -a -m'.'; git push;"
alias pretty1="enscript -GE"
alias pretty2="enscript -G2rE"
# --trim specification is "left bottom right top"
alias 2up="pdfnup --nup 2x1 --paper letterpaper --trim '40 60 60 40'"
alias start_vpn="cd ~/config/openvpn; sudo openvpn --config client.conf"

# Some system specific stuff
if [[ `hostname` == 'matthew-gardners-computer.local' ]]
#if [[ `hostname -f |cut -d'.' -f2` == "aml" ]]
then
  export MYSQL_HOME=~/Documents/mysql-5.0.51b-osx10.5-x86
  export LIBRARY_PATH=/opt/local/lib
  export CPLUS_INCLUDE_PATH=/opt/local/include
  export PKG_CONFIG_PATH=/opt/local/include/gtkmm-2.4:/opt/local/include/gtkmm-2.0:/opt/local/lib/pkgconfig:/usr/X11R6/lib/pkgconfig
  export DYLD_FALLBACK_LIBRARY_PATH=/opt/local/lib:/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A
  export CLICOLOR=1
  alias ls='ls -G'
else
  alias ls='ls --color=always'
fi

# This is because I use a black terminal on my mac, but a white terminal
# in linux.  I want different colors on the different systems.  So it turns
# out that $TERM is xterm-color on the mac, and just xterm in linux, so
# this works.
# Except with the desktop now, I think this doesn't work.  I'll look into
# just removing it and living with the color difference.
if [[ $TERM == "xterm-color" ]]
then
  export LS_COLORS="di=36:ln=35:so=32:pi=33:ex=32:bd=34;46:cd=34;43:su=0;41:sg=0;46:tw=0;42:ow=0;43:*.py=33"
else
  export LSCOLORS=gxfxcxdxcxegedabaggxgx
fi

# XLE stuff
export XLEPATH=$HOME/xle
export PATH=$XLEPATH/bin:$PATH
export LD_LIBRARY_PATH=$XLEPATH/lib:$LD_LIBRARY_PATH
export DYLD_LIBRARY_PATH=$XLEPATH/lib:$DYLD_LIBRARY_PATH

update_display() {
    good_display=$(netstat -an | /bin/grep 0\ [0-9,:,.]*:60..\ | awk '{print $4}' | tail -n 1)
    good_display=${good_display: -2}
    export DISPLAY=${HOSTNAME}:${good_display}.0
}
